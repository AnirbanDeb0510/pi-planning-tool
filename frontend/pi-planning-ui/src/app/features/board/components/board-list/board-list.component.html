<div class="board-list-container">
  <div class="board-list-content">
    <div class="header">
      <h1>Your Boards</h1>
      <div class="header-actions">
        <button class="btn-primary" (click)="navigateToCreate()">
          + Create New
        </button>
        <button class="btn-secondary" (click)="goBack()">
          â† Back to Home
        </button>
      </div>
    </div>

    <!-- Mandatory Organization & Project Selection -->
    <div class="mandatory-filters">
      <div class="filter-section">
        <label for="org-input">Organization Name (Required)</label>
        <input
          id="org-input"
          type="text"
          class="filter-input"
          [(ngModel)]="organizationInput"
          (ngModelChange)="onOrganizationChange()"
          placeholder="e.g., MyOrganization"
        />
      </div>

      <div class="filter-section">
        <label for="project-input">Project Name (Required)</label>
        <input
          id="project-input"
          type="text"
          class="filter-input"
          [(ngModel)]="projectInput"
          (ngModelChange)="onProjectChange()"
          placeholder="e.g., MyProject"
        />
      </div>
    </div>

    <!-- Optional Filters (shown only after org/project provided) -->
    <div *ngIf="organizationInput() && projectInput()" class="filters">
      <input
        type="text"
        class="search-input"
        [(ngModel)]="searchTerm"
        (ngModelChange)="loadBoards()"
        placeholder="Search boards..."
      />
      <div class="filter-chips">
        <label class="filter-chip">
          <input
            type="checkbox"
            [(ngModel)]="showLockedOnly"
            (change)="loadBoards()"
          />
          Locked Only
        </label>
        <label class="filter-chip">
          <input
            type="checkbox"
            [(ngModel)]="showFinalizedOnly"
            (change)="loadBoards()"
          />
          Finalized Only
        </label>
      </div>
    </div>

    <!-- Message when org/project not provided -->
    <div *ngIf="!organizationInput() || !projectInput()" class="selection-required">
      <div class="selection-message">
        <p>ğŸ“‹ Please enter your organization and project names to find boards.</p>
      </div>
    </div>

    <div *ngIf="loading()" class="loading-state">
      <div class="spinner"></div>
      <p>Loading boards...</p>
    </div>

    <div *ngIf="error()" class="error-state">
      <p>{{ error() }}</p>
      <button class="btn-primary" (click)="loadBoards()">Retry</button>
    </div>

    <div *ngIf="!loading() && !error() && boards().length === 0 && organizationInput() && projectInput()" class="empty-state">
      <div class="empty-icon">ğŸ“‹</div>
      <h3>No boards found</h3>
      <p>Create your first board to get started</p>
      <button class="btn-primary" (click)="navigateToCreate()">
        Create Board
      </button>
    </div>

    <div *ngIf="!loading() && !error() && boards().length > 0 && organizationInput() && projectInput()" class="boards-grid">
      <div
        *ngFor="let board of boards()"
        class="board-card"
        (click)="openBoard(board.id)"
      >
        <div class="board-card-header">
          <h3>{{ board.name }}</h3>
          <div class="board-badges">
            <span *ngIf="board.isLocked" class="badge locked">ğŸ”’ Locked</span>
            <span *ngIf="board.isFinalized" class="badge finalized">âœ… Finalized</span>
          </div>
        </div>

        <div class="board-card-body">
          <div class="board-info">
            <span *ngIf="board.organization" class="info-item">
              <strong>Org:</strong> {{ board.organization }}
            </span>
            <span *ngIf="board.project" class="info-item">
              <strong>Project:</strong> {{ board.project }}
            </span>
            <span class="info-item">
              <strong>Sprints:</strong> {{ board.sprintCount }}
            </span>
            <span class="info-item">
              <strong>Features:</strong> {{ board.featureCount }}
            </span>
          </div>

          <div class="board-date">
            Created: {{ formatDate(board.createdAt) }}
          </div>
        </div>

        <div class="board-card-footer">
          <button
            class="btn-link"
            (click)="openBoard(board.id); $event.stopPropagation()"
          >
            Open â†’
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
