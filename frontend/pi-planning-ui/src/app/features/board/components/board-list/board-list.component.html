<div class="board-list-container">
  <div class="board-list-content">
    <div class="header">
      <h1>{{ LABELS.HEADERS.BOARD_LIST }}</h1>
      <div class="header-actions">
        <button class="btn-primary" (click)="navigateToCreate()">
          {{ LABELS.BUTTONS.CREATE_NEW }}
        </button>
        <button class="btn-secondary" (click)="goBack()">
          {{ LABELS.BUTTONS.BACK_HOME }}
        </button>
      </div>
    </div>

    <!-- Mandatory Organization & Project Selection -->
    <div class="mandatory-filters">
      <div class="filter-section">
        <label for="org-input">{{ LABELS.FIELDS.ORGANIZATION_NAME_REQUIRED }}</label>
        <input
          id="org-input"
          type="text"
          class="filter-input"
          [(ngModel)]="organizationInput"
          (ngModelChange)="onOrganizationChange()"
          placeholder="{{ PLACEHOLDERS.ORG_REQUIRED }}"
        />
      </div>

      <div class="filter-section">
        <label for="project-input">{{ LABELS.FIELDS.PROJECT_NAME_REQUIRED }}</label>
        <input
          id="project-input"
          type="text"
          class="filter-input"
          [(ngModel)]="projectInput"
          (ngModelChange)="onProjectChange()"
          placeholder="{{ PLACEHOLDERS.PROJECT_REQUIRED }}"
        />
      </div>
    </div>

    <!-- Optional Filters (shown only after org/project provided) -->
    <div *ngIf="organizationInput() && projectInput()" class="filters">
      <input
        type="text"
        class="search-input"
        [(ngModel)]="searchTerm"
        (ngModelChange)="loadBoards()"
        placeholder="{{ PLACEHOLDERS.SEARCH_BOARDS }}"
      />
      <div class="filter-chips">
        <label class="filter-chip">
          <input
            type="checkbox"
            [(ngModel)]="showLockedOnly"
            (change)="loadBoards()"
          />
          {{ LABELS.FILTERS.LOCKED_ONLY }}
        </label>
        <label class="filter-chip">
          <input
            type="checkbox"
            [(ngModel)]="showFinalizedOnly"
            (change)="loadBoards()"
          />
          {{ LABELS.FILTERS.FINALIZED_ONLY }}
        </label>
      </div>
    </div>

    <!-- Message when org/project not provided -->
    <div *ngIf="!organizationInput() || !projectInput()" class="selection-required">
      <div class="selection-message">
        <p>{{ MESSAGES.BOARD_LIST.SELECTION_REQUIRED }}</p>
      </div>
    </div>

    <div *ngIf="loading()" class="loading-state">
      <div class="spinner"></div>
      <p>{{ MESSAGES.BOARD_LIST.LOADING }}</p>
    </div>

    <div *ngIf="error()" class="error-state">
      <p>{{ error() }}</p>
      <button class="btn-primary" (click)="loadBoards()">{{ LABELS.BUTTONS.RETRY }}</button>
    </div>

    <div *ngIf="!loading() && !error() && boards().length === 0 && organizationInput() && projectInput()" class="empty-state">
      <div class="empty-icon">ðŸ“‹</div>
      <h3>{{ MESSAGES.BOARD_LIST.EMPTY_TITLE }}</h3>
      <p>{{ MESSAGES.BOARD_LIST.EMPTY_SUBTITLE }}</p>
      <button class="btn-primary" (click)="navigateToCreate()">
        {{ LABELS.BUTTONS.CREATE_BOARD }}
      </button>
    </div>

    <div *ngIf="!loading() && !error() && boards().length > 0 && organizationInput() && projectInput()" class="boards-grid">
      <div
        *ngFor="let board of boards()"
        class="board-card"
        (click)="openBoard(board.id)"
      >
        <div class="board-card-header">
          <h3>{{ board.name }}</h3>
          <div class="board-badges">
            <span *ngIf="board.isLocked" class="badge locked">{{ LABELS.BADGES.LOCKED }}</span>
            <span *ngIf="board.isFinalized" class="badge finalized">{{ LABELS.BADGES.FINALIZED }}</span>
          </div>
        </div>

        <div class="board-card-body">
          <div class="board-info">
            <span *ngIf="board.organization" class="info-item">
              <strong>{{ LABELS.INFO.ORG }}</strong> {{ board.organization }}
            </span>
            <span *ngIf="board.project" class="info-item">
              <strong>{{ LABELS.INFO.PROJECT }}</strong> {{ board.project }}
            </span>
            <span class="info-item">
              <strong>{{ LABELS.INFO.SPRINTS }}</strong> {{ board.sprintCount }}
            </span>
            <span class="info-item">
              <strong>{{ LABELS.INFO.FEATURES }}</strong> {{ board.featureCount }}
            </span>
          </div>

          <div class="board-date">
            {{ LABELS.INFO.CREATED }} {{ formatDate(board.createdAt) }}
          </div>
        </div>

        <div class="board-card-footer">
          <button
            class="btn-link"
            (click)="openBoard(board.id); $event.stopPropagation()"
          >
            {{ LABELS.BUTTONS.OPEN }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
