<div class="story-card" [class.story-moved]="hasMoved() && parent.isBoardFinalized()" [class.story-new]="getStoryIndicator().type === 'new' && parent.isBoardFinalized()">
  <!-- Story Indicator Badge - Shows icon and label -->
  <div class="story-indicator" *ngIf="hasMoved() && parent.isBoardFinalized()" [class.moved]="getStoryIndicator().type === 'moved'" [class.new]="getStoryIndicator().type === 'new'" [title]="getStoryIndicator().label">
    <span class="indicator-icon">{{ getStoryIndicator().icon }}</span>
    <span class="indicator-label">{{ getStoryIndicator().label }}</span>
  </div>

  <div class="story-header">
    <h3>{{ story.title }}</h3>
    <span class="azure-badge" *ngIf="story.azureId">{{ story.azureId }}</span>
  </div>

  <div class="points">
    <ng-container
      *ngIf="
        parent?.showDevTest?.() && (story.devStoryPoints || story.testStoryPoints);
        else singlePoints
      "
    >
      <span *ngIf="story.devStoryPoints">üíª Dev: {{ story.devStoryPoints }}</span>
      <span *ngIf="story.testStoryPoints">üß™ Test: {{ story.testStoryPoints }}</span>
      <span>({{ (story.devStoryPoints || 0) + (story.testStoryPoints || 0) }})</span>
    </ng-container>

    <ng-template #singlePoints>
      <span
        >‚≠ê
        {{
          story.storyPoints ?? (story.devStoryPoints || 0) + (story.testStoryPoints || 0)
        }}
        pts</span
      >
    </ng-template>
  </div>
</div>
